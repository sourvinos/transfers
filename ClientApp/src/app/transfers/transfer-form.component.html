<!-- <p>{{ form.value | json }} {{ form.valid }}</p> -->

<div id="content">
    <form [formGroup]="form" class="ui form" id="details" autocomplete="off">
        <div class="field hidden">
            <label>Id</label>
            <input type="text" formControlName="id">
        </div>
        <div class="field hidden">
            <label>Date</label>
            <input type="text" formControlName="dateIn">
        </div>
        <div class="field" [class.error]="(destinationId.invalid && destinationDescription.invalid && destinationDescription.touched) || (destinationDescription.touched && !arrayLookup(destinations, destinationDescription))">
            <label>Destination</label>
            <input type="text" list="destinationList" formControlName="destinationDescription" (change)="updateDestinationId(destinations, $event)" tabindex="3">
            <datalist id="destinationList">
                <select>
                    <option *ngFor="let destination of destinations" [value]="destination.description"></option>
                </select>
            </datalist>
        </div>
        <div class="field" [class.error]="(customerId.invalid && customerDescription.invalid && customerDescription.touched) || (customerDescription.touched && !arrayLookup(customers, customerDescription))">
            <label>Customer</label>
            <input type="text" list="customerList" formControlName="customerDescription" (change)="updateCustomerId(customers, $event)" tabindex="4">
            <datalist id="customerList">
                <select>
                    <option *ngFor="let customer of customers" [value]="customer.description"></option>
                </select>
            </datalist>
        </div>
        <div class="field" [class.error]="(pickupPointId.invalid && pickupPointDescription.invalid && pickupPointDescription.touched) || (pickupPointDescription.touched && !arrayLookup(pickupPoints, pickupPointDescription))">
            <label>Pickup point</label>
            <input type="text" list="pickupPointList" formControlName="pickupPointDescription" (change)="updatePickupPointId(pickupPoints, $event)" tabindex="5">
            <datalist id="pickupPointList">
                <select>
                    <option *ngFor="let pickupPoint of pickupPoints" [value]="pickupPoint.description"></option>
                </select>
            </datalist>
        </div>
        <div class="fields">
            <div class="field numeric">
                <label>Adults</label>
                <input type="text" class="number" formControlName="adults" tabindex="5" pattern="^[0-9]+[0-9]*$" (change)="calculateTotalPersons()" tabindex="8">
            </div>
            <div class="field numeric">
                <label>Kids</label>
                <input type="text" class="number" formControlName="kids" tabindex="6" pattern="^[0-9]+[0-9]*$" (change)="calculateTotalPersons()" tabindex="9">
            </div>
            <div class="field numeric">
                <label>Free</label>
                <input type="text" class="number" formControlName="free" tabindex="7" pattern="^[0-9]+[0-9]*$" (change)="calculateTotalPersons()" tabindex="10">
            </div>
            <div class="field numeric total">
                <label>Total</label>
                <input type="text" class="number" formControlName="totalPersons">
            </div>
        </div>
        <div class="field" [class.error]="(driverId.invalid && driverDescription.invalid && driverDescription.touched) || (driverDescription.touched && !arrayLookup(drivers, driverDescription))">
            <label>Driver</label>
            <input type="text" list="driverList" formControlName="driverDescription" (change)="updateDriverId(drivers, $event)" tabindex="6">
            <datalist id="driverList">
                <select>
                    <option *ngFor="let driver of drivers" [value]="driver.description"></option>
                </select>
            </datalist>
        </div>
        <div class="field" [class.error]="(portId.invalid && portDescription.invalid && portDescription.touched) || (portDescription.touched && !arrayLookup(ports, portDescription))">
            <label>Port</label>
            <input type="text" list="portList" formControlName="portDescription" (change)="updatePortId(ports, $event)" tabindex="7">
            <datalist id="portList">
                <select>
                    <option *ngFor="let port of ports" [value]="port.description"></option>
                </select>
            </datalist>
        </div>
        <div class="field">
            <label>Remarks</label>
            <input type="text" formControlName="remarks" tabindex="11">
        </div>
    </form>
</div>

<!-- <div id="footer">
    <div id="buttons">
        <button class="ui button secondary" (click)="delete()" [hidden]="form.value.id != 0">Delete</button>
        <button class="ui button solid" (click)="save()" [disabled]="!form.valid">Save</button>
    </div>
</div> -->