<div id="header">
    <div id="title">
        <i *ngIf="isFormVisible" class="big arrow alternate circle left outline icon navigation-icon" (click)="scrollBackToList()"></i>
        <h2>Transfers</h2>
    </div>
    <div class="ui divider"></div>
    <div id="search-box">
        <form [formGroup]="form" class="ui form" autocomplete="off">
            <div class="field">
                <input type="text" class="date" formControlName="dateIn" [appInputFormat]="'date'" id="dateIn">
                <button class="ui button primary" id="go" (click)="getTransfers()">Search</button>
            </div>
        </form>
    </div>
</div>

<div id="content">
    <div id="empty">
        <div class="empty ui divider"></div>
        <div id="empty-content">
            <div *ngIf="queryResult.persons == null; then thenBlock else elseBlock"></div>
            <ng-template #thenBlock></ng-template>
            <ng-template #elseBlock>
                <i class="huge search icon"></i>
                <h2>Nothing found!</h2>
            </ng-template>
        </div>
    </div>
    <div id="summaries">
        <div class="summaryBlock">
            <div class="summaryHeader">
                <header>Destinations</header>
                <header class="total">{{ queryResult.persons }}</header>
            </div>
            <div *ngFor="let item of queryResult.personsPerDestination" (click)="toggleItem(item, this.selectedDestinations)" class="item destination" [class.active]="item.isSelected" [id]="item.description">
                <div class="description"> {{ item.description }} </div>
                <div class="total"> {{ item.persons }} </div>
            </div>
        </div>
        <div class="summaryBlock">
            <div class="summaryHeader">
                <header>Customers</header>
                <header class="total">{{ queryResult.persons }}</header>
            </div>
            <div *ngFor="let item of queryResult.personsPerCustomer" (click)="toggleItem(item, this.selectedCustomers)" class="item customer" [class.active]="item.isSelected" [id]="item.description">
                <div class="description"> {{ item.description }} </div>
                <div class="total"> {{ item.persons }} </div>
            </div>
        </div>
        <div class="summaryBlock">
            <div class="summaryHeader">
                <header>Routes</header>
                <header class="total">{{ queryResult.persons }}</header>
            </div>
            <div *ngFor="let item of queryResult.personsPerRoute" (click)="toggleItem(item, this.selectedRoutes)" class="item route" [class.activeItem]="item.isSelected" [id]="item.description">
                <div class="description"> {{ item.description }} </div>
                <div class="total"> {{ item.persons }} </div>
            </div>
        </div>
    </div>
    <div id="list">
        <div id="scrollable">
            <table class="ui table">
                <thead>
                    <tr>
                        <th class="center aligned one wide">Destination</th>
                        <th class="center aligned one wide">Route</th>
                        <th class="center aligned">Customer</th>
                        <th class="center aligned three wide">Pickup point</th>
                        <th class="center aligned one wide">Time</th>
                        <th class="center aligned one wide">Adults</th>
                        <th class="center aligned one wide">Kids</th>
                        <th class="center aligned one wide">Free</th>
                        <th class="center aligned one wide">Total</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let transfer of queryResultFiltered.transfers" (click)="populateForm(transfer)">
                        <td class="center aligned">{{ transfer.destination.abbreviation }}</td>
                        <td class="center aligned">{{ transfer.pickupPoint.route.abbreviation }}</td>
                        <td class="left aligned">{{ transfer.customer.description }}</td>
                        <td class="left aligned">{{ transfer.pickupPoint.exactPoint }}</td>
                        <td class="center aligned">{{ transfer.pickupPoint.time }}</td>
                        <td class="right aligned">{{ transfer.adults }}</td>
                        <td class="right aligned">{{ transfer.kids }}</td>
                        <td class="right aligned">{{ transfer.free }}</td>
                        <td class="right aligned">{{ transfer.totalPersons }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div id="form">
        <app-transfer-form (eventEmitter)="scrollBackToListFromForm($event)" [transfer]="selectedTransfer"></app-transfer-form>
    </div>
</div>

<div id="footer">
    <div class="ui divider"></div>
    <div id="buttons">
        <button *ngIf="!isFormVisible && !isNewRecord" class="ui button primary" id="new" (click)="newRecord()">New</button>
        <button *ngIf="isFormVisible && !isNewRecord" class="ui button delete" (click)="deleteRecord()">Delete</button>
        <button *ngIf="isFormVisible" class="ui button primary" (click)="saveRecord()">Save</button>
    </div>
</div>